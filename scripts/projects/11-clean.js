(()=>{function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n){return 1==n?t<0&&e>0?1:t>0&&e>0?2:3:2==n?t<0&&e<0?1:t>0&&e<0?2:3:3==n?t<0&&e>0?1:t>0&&e<0?2:3:4==n?t>0&&e>0?1:t<0&&e<0?2:3:5==n?t<0&&e>0?1:t<0&&e<0?2:3:6==n?t>0&&e>0?1:t>0&&e<0?2:3:t>0&&e>0?1:t>0&&e<0?2:t<0&&e>0?3:4}function n(t,e,{vx1:n,vx2:r}){return sin(t*(1/(width*n)))+cos(e*r)}function r(t,e,{vy1:n,vy2:r}){return cos(e*(1/(height*r)))+sin(t*n)}class i{done=!1;nPoints=0;color=color(0,100);weight=10;constructor(t,e,n,r,i=4){this.x=t,this.y=e,this.done=!1,this.nPoints=0,this.points=[createVector(this.x,this.y)],this.weight=r,this.forceVals=n,this.precision=+i}getColor(t,i,o){let s=this.points[this.points.length-1],a=e(n(s.x,s.y,this.forceVals),r(s.x,s.y,this.forceVals),t),l=color(i[a]);l.setAlpha(o),this.color=l}setAlpha(t){this.color.setAlpha(t)}addPoint(){let t=this.points[this.points.length-1],e=n(t.x,t.y,this.forceVals),i=r(t.x,t.y,this.forceVals);return e<1&&i<1?createVector(t.x+2*e,t.y+2*i):e<.8&&i<.8?createVector(t.x+1.2*e,t.y+1.2*i):createVector(t.x+e,t.y+i)}checkIntersects(t,e,n){let r=!1;for(let s=0;s<e.length;s++)if(e[s]!=this)for(let a=0;a<e[s].points.length;a+=100-this.precision)if(i=t,o=e[s].points[a],abs(i.x-o.x)<n&&abs(i.y-o.y)<n||t.x<0+this.weight/2||t.x>width-this.weight/2||t.y<0+this.weight/2||t.y>height-this.weight/2){r=!0;break}var i,o;return r}draw(){stroke(this.color),strokeWeight(this.weight),beginShape(),curveVertex(this.points[0].x,this.points[0].y),this.points.forEach((t=>curveVertex(t.x,t.y))),curveVertex(this.points[this.points.length-1].x,this.points[this.points.length-1].y),endShape()}}let o=document.createElement("style");o.textContent=t('.custom-controls{color:#a9acbd;width:270px;background-color:#19191d;font-size:.8rem;line-height:1.3;position:absolute;top:0}.custom-controls button.toggle-btn{color:#a9acbd;width:100%;text-align:left;height:1.4rem;--toggleSize:.6rem;border:none;align-items:center;padding:0 .5rem;font-size:.8rem;line-height:1;display:flex;position:relative}.custom-controls button.toggle-btn:after,.custom-controls button.toggle-btn:before{width:var(--toggleSize);height:var(--toggleSize);content:"";clip-path:polygon(0% 0%,100% 0%,100% 100%,0% 0%);background:#a9acbd;transition:all .3s;display:block;position:absolute;top:50%;right:.5rem;transform:translateY(-50%)translate(.1rem,-.1rem)}.custom-controls button.toggle-btn:before{clip-path:polygon(0% 0%,0% 100%,100% 100%,0% 0%);border-top:none;transform:translateY(-50%)translate(-.1rem,.1rem)}.custom-controls button.toggle-btn[aria-expanded=false]:after,.custom-controls button.toggle-btn[aria-expanded=false]:before{transform:translateY(-50%)}.custom-controls .section{border-top:1px solid #2d2d39}.custom-controls .section:first-child{border-top:0}.custom-controls .section h4,.custom-controls .input-container,.custom-controls .input-container label{margin-bottom:3px}.custom-controls .input-container input[type=text]:focus{outline:1px solid #b7c0ee}.custom-controls .slider-container{width:100%;border-top:1px solid #24242a;align-items:center;padding-top:2px;padding-bottom:2px;display:flex}.custom-controls .slider-container:first-child{border-top:0}.custom-controls .slider-container label{width:100%;justify-content:space-between;align-items:center;display:flex}.custom-controls .slider-container label .label-text{margin-right:5px}.custom-controls .slider-container label .slider-val{background:#2d2d39;border-radius:2px;margin-left:auto;padding:2px;display:block}.custom-controls .select-container{border-top:1px solid #24242a;align-items:center;padding:2px 0;display:flex}.custom-controls .select-container select{margin-left:5px}.custom-controls .select-container:first-child{border-top:0}.custom-controls select{color:#a9acbd;box-shadow:none;background:#2d2d39;border:1px solid #24242a}.custom-controls .btn-container{flex-wrap:wrap;justify-content:end;display:flex;position:relative}.custom-controls .btn-container.break{padding-top:8px}.custom-controls .btn-container.break:before{content:"";width:calc(100% + 1rem);height:1px;background:#24242a;position:absolute;top:0;left:-.5rem}.custom-controls .btn-container button{margin-top:3px;margin-left:5px}.custom-controls input[type=range]{-webkit-appearance:none;width:150px;height:.5rem;cursor:pointer;background-color:#2d2d39;background-image:linear-gradient(#2d2d39 0% 100%);border-radius:.25rem}.custom-controls input[type=range]::-webkit-slider-thumb,.custom-controls input[type=range]::-moz-range-thumb,.custom-controls input[type=range]::-ms-thumb{-webkit-appearance:none;width:1rem;height:1rem;background-color:#a9acbd;border:none;border-radius:50%;transition:background-color .2s}.custom-controls input[type=range]::-webkit-slider-thumb:hover,.custom-controls input[type=range]::-moz-range-thumb:hover,.custom-controls input[type=range]::-ms-thumb:hover{background-color:#32de8a;border:2px solid #000}.custom-controls input[type=range]::-webkit-slider-runnable-track,.custom-controls input[type=range]::-moz-range-track,.custom-controls input[type=range]::-ms-track{-webkit-appearance:none;box-shadow:none;background:0 0;border:none}.custom-controls a{color:#b7c0ee;text-decoration:underline}.custom-controls a:hover,.custom-controls a:focus{color:#32de8a}.custom-controls .controls-inner{opacity:1;height:auto;padding:.5rem .5rem .3rem;transition:all .3s}.custom-controls .controls-inner.hidden{opacity:0;height:0;padding:0}.custom-controls .error-label{color:#df2935;font-size:.8rem;font-weight:500;transition:all .3s}.custom-controls input:focus,.custom-controls button:focus,.custom-controls select:focus{outline:2px solid #a9acbd}.custom-controls .tabs-container button{margin-right:3px}.custom-controls .tabs-container button.active{background-color:#202025}.custom-controls .panel{background:#202025;padding:3px 5px;display:none}.custom-controls .panel.active{display:block}input[type=text]{color:#a9acbd;width:100%;background-color:#2d2d39;border:none;margin:0;padding:0 .4rem;font-size:.8rem;line-height:1.6}input[type=text]:focus{color:#fff;outline:2px solid #b7c0ee}button{color:#a9acbd;cursor:pointer;background-color:#2d2d39;border:none;margin:0;padding:4px;font-size:.8rem;font-weight:500;transition:all .3s}button:hover,button:focus{background-color:#252541;font-weight:700}.radio-opts{flex-direction:row;display:flex}.radio-opts label{margin-right:.5rem}'),document.body.appendChild(o);class s{constructor(t){this.shown=this.shownFromStorage()??!0,this.rightSide=t,this.container=this.buildContainer(),this.count=0,this.activePanel=!1,this.panels={},this.panelIds=[],this.tabBtns=[]}shownFromStorage(){let t=localStorage.getItem("showcontrols");if(t)return boolean(t)}buildContainer(){let t=createDiv().class("custom-controls");t.style(this.rightSide?"right":"left",0),t.style("top",0);let e=createButton("toggle controls").class("toggle-btn").parent(t).attribute("aria-expanded",this.shown?"true":"false"),n=createDiv().class("controls-inner").parent(t).attribute("aria-hidden",this.shown?"false":"true");return this.shown||n.addClass("hidden"),e.elt.addEventListener("click",(()=>{this.shown?(n.addClass("hidden"),n.attribute("aria-hidden","true"),e.attribute("aria-expanded","false"),localStorage.setItem("showcontrols","false"),this.shown=!1):(n.removeClass("hidden"),n.attribute("aria-hidden","false"),e.attribute("aria-expanded","true"),localStorage.setItem("showcontrols","true"),this.shown=!0)})),n}addPanelTabs(){this.tabsContainer=createDiv().class("tabs-container").parent(this.container)}addPanel({titleString:t,id:e=`controls-panel-${this.count}`}){this.count++,this.tabsContainer||this.addPanelTabs();let n=createButton(t).parent(this.tabsContainer).attribute("data-for",e);this.tabBtns.push(n),n.elt.addEventListener("click",(()=>{this.activatePanel(e,n)}));let r=createDiv().addClass("panel").attribute("id",e).parent(this.container);return this.panels[e]=r,this.panelIds.push(e),1==this.panelIds.length&&(r.addClass("active"),n.addClass("active")),r}activatePanel(t,e){this.tabBtns.forEach((t=>t.removeClass("active"))),e.addClass("active"),this.panelIds.forEach((t=>this.panels[t].removeClass("active"))),this.panels[t].addClass("active")}addSection({id:t="",labelString:e,style:n}){this.count++,t=t??`controls-section-${this.count}`;let r=createDiv().parent(this.container).class("section").attribute("id",t);if(e){createElement("h4",e).class("section-title").parent(r)}if(n){Object.keys(n).forEach((t=>{r.style(t,n[t])}))}return r}createInput({id:t,labelString:e,onChange:n,parent:r=this.container}){this.count++;let i,o=createDiv().parent(r).class("input-container"),s=(createElement("label",e).style("display","block").parent(o).attribute("for",t),createInput("").parent(o).attribute("id",t)),a=createSpan("").class("error-label").parent(o),l={input:s,container:o};return s.input((t=>{i&&clearTimeout(i),i=setTimeout((function(){let e=n(t);e&&e.error?(console.log(a),a.html(e.error)):a.html("")}),300)})),l}btn({onClick:t,labelString:e,parent:n}){this.count++;let r=createButton(e).class("controls-btn").parent(n);return r.elt.addEventListener("click",t),r}createBtn({onClick:t,labelString:e,parent:n=this.container}){let r=createDiv().parent(n).class("btn-container");return this.btn({onClick:t,labelString:e,parent:r})}createBtnSet({btns:t,parent:e=this.container,style:n=!1,className:r=!1}){let i=createDiv().parent(e).class("btn-container");r&&i.addClass(r);let o=[];if(t.forEach((t=>{t.parent=i,o.push(this.btn(t))})),n){Object.keys(n).forEach((t=>{i.style(t,n[t])}))}return o}createText({text:t,parent:e=this.container}){return createDiv(t).parent(e).class("text")}createSlider({id:t=`controls-${this.count}`,labelString:e,onChange:n,min:r,max:i,step:o=1,val:s,parent:a=this.container}){this.count++,s=s??floor((i-r)/2+r);let l=createDiv().parent(a).class("slider-container"),c=createElement("label").parent(l).attribute("for",t),h=(createSpan(e).class("label-text").parent(c),createSlider(r,i,s,o).parent(c).attribute("id",t)),d=createSpan(s).class("slider-val").parent(c);return h.update=function(t){h.value(t),d.html(t)},h.input((t=>{d.html(h.value()),n&&n(t)})),h}createPaletteInput({id:t="urlinput",labelString:e="custom palette: ",onPaletteUpdate:n}){return this.createInput({id:t,labelString:e,onChange:function(t){let e=t.target.value;if(""==e)return;if(/coolors.co\/(?:[a-fA-Z0-9]{6}-){1,}(?:[a-fA-Z0-9]{6})$/.test(e)){let t=e.split("coolors.co/").slice(1)[0].split("-").map((t=>"#"+t));return n(t)}return{error:"invalid url"}}})}createSelect({id:t,labelString:e,options:n,useOptionsIndex:r=!1,namesAndVals:i=!1,selected:o,onChange:s,parent:a=this.container,style:l}){this.count++,t=t??`controls-sel-${this.count}`;let c=createDiv().parent(a).class("select-container");if(l){Object.keys(l).forEach((t=>{c.style(t,l[t])}))}let h=createElement("label",e).parent(c).attribute("for",t),d=createSelect().parent(c).attribute("id",t);for(let t=0;t<n.length;t++)i?d.option(n[t].name,n[t].val):d.option(r?t:n[t]);return o&&d.selected(o),d.changed(s),{el:d,container:c,label:h}}createRadio({id:t,labelString:e,options:n,selected:r,onChange:i,parent:o=this.container}){this.count++,t=t??`controls-radio-${this.count}`;let s=createDiv().style("display","flex").parent(o).class("radio-container"),a=createRadio().attribute("id",t).attribute("class","radio-opts").parent(s);return n.forEach(((t,e)=>{a.option(t)})),r&&a.selected(r),a.changed(i),a}}class a{constructor(t,e){this.controls=t,this.initialVals=e,this.panel=this.controls.addPanel({titleString:"forceVals"}),this.sliders={vx1:this.createSlider("vx1"),vx2:this.createSlider("vx2",!0),vy1:this.createSlider("vy1",!0),vy2:this.createSlider("vy2")}}createSlider(t,e=!1){return this.controls.createSlider({labelString:t,min:e?.001:.01,max:e?.09:2,step:e?1e-4:.01,val:round(this.initialVals[t],3),parent:this.panel})}get vx1(){return this.sliders.vx1.elt.value}get vx2(){return this.sliders.vx2.elt.value}get vy1(){return this.sliders.vy1.elt.value}get vy2(){return this.sliders.vy2.elt.value}set vx1(t){this.sliders.vx1.update(round(t,2))}set vx2(t){this.sliders.vx2.update(round(t,2))}set vy1(t){this.sliders.vy1.update(round(t,2))}set vy2(t){this.sliders.vy2.update(round(t,2))}}class l{constructor(t,e,n,r){this.initVals=e,this.controls=t,this.panel=this.controls.addPanel({titleString:"general"}),this.redrawCurves=n,this.resize=r,this.sliders={minLength:this.createSlider("minLength"),idealLength:this.createSlider("idealLength"),meetThreshold:this.createSlider("meetThreshold",1,30,.5),thickness:this.createSlider("thickness",.5,30,.5,this.redrawCurves),alphaVal:this.createSlider("alphaVal",10,255,1,this.redrawCurves),precision:this.createSlider("precision",1,100,1),width:this.createSlider("width",10,2e3,10,this.resize),height:this.createSlider("height",10,2e3,10,this.resize)}}createSlider(t,e=10,n=1200,r=1,i=!1){return this.controls.createSlider({labelString:t,min:e,max:n,step:r,val:this.initVals[t],parent:this.panel,onChange:i})}get precision(){return this.sliders.precision.elt.value}get minLength(){return this.sliders.minLength.elt.value}get idealLength(){return this.sliders.idealLength.elt.value}get meetThreshold(){return this.sliders.meetThreshold.elt.value}get thickness(){return this.sliders.thickness.elt.value}get alphaVal(){return this.sliders.alphaVal.elt.value}get width(){return this.sliders.width.elt.value}get height(){return this.sliders.height.elt.value}set minLength(t){this.sliders.minLength.update(t)}set idealLength(t){this.sliders.idealLength.update(t)}set meetThreshold(t){this.sliders.meetThreshold.update(t)}set thickness(t){this.sliders.thickness.update(t)}set alphaVal(t){this.sliders.alphaVal.update(t)}set width(t){this.sliders.width.update(t)}set height(t){this.sliders.height.update(t)}set precision(t){this.sliders.precision.update(t)}}function c({params:t,doReset:e,redrawCurves:n,addCurves:r,initForceVals:i,save:o,resize:c}){let h=new s(!0),d=new l(h,t,n,c),u=new a(h,i);return h.createBtnSet({btns:[{labelString:"new drawing with current vals",onClick:()=>e(!1)},{labelString:"new drawing + randomize forceVals",onClick:()=>e(!0,!1)},{labelString:"new drawing + randomize all",onClick:()=>e(!0,!0)},{labelString:"add curves",onClick:r},{labelString:"save",onClick:o}]}),h.createBtn({labelString:"new drawing with above vals",onClick:()=>e(!1),parent:u.panel}),{forces:u,curveVals:d}}function h(){let t=document.createElement("div");return t.style.backgroundColor="rgba(255,255,255,0.7)",t.style.width="100%",t.style.height="100%",t.style.left="0",t.style.top="0",t.style.position="absolute",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.display="none",t.innerHTML="please wait...",document.body.appendChild(t),{el:t,show:()=>{t.style.display="flex"},hide:()=>{t.style.display="none"}}}let d,u,p,g,m=["#0d5c63","#fc60a8","#ff8c42","#93032e","#4CB5AE"],b=[],f=0,v=50,y=50,w={width:Math.min(window.innerWidth,800),height:Math.min(window.innerHeight,700),minLength:200,idealLength:500,meetThreshold:3,thickness:10,alphaVal:230,precision:4};function x(){f++,noFill(),strokeCap(SQUARE),strokeWeight(g.thickness),stroke(100,10,250);let t=b.length;!function(t){let e=b.length,n=0,r=+g.idealLength+1;t.forEach(((e,n)=>{let r=new i(e.x,e.y,p,g.thickness,g.precision);console.log(`attempt curve ${n} of ${t.length}`);let o=!0;for(;r.points.length<g.idealLength;){let t=r.addPoint();if(r.checkIntersects(t,b,g.meetThreshold)){if(r.points.length<g.minLength){o=!1;break}o=!0;break}r.points.push(t)}o&&(r.getColor(d,m,g.alphaVal),b.push(r))}));for(let t=e;t<b.length;t++){let e=b[t].points.length;e>n?n=e:e<r&&(r=e)}console.log(b),console.log(`started at ${e}, finished with ${b.length} curvy particles.\n\t\tThe longest is ${n}. The shortest is ${r}`)}(function(t,e=100){console.log("starting circle pack function");let n=[],r=0,i=0;for(;r<e;){i++;let e=createVector(random(t/2,width-t/2),random(t/2,height-t/2)),o=!0;for(let r=0;r<n.length;r++)if(e.dist(n[r])<t){o=!1;break}o?(n.push(e),r=0):r++}return console.log(`took ${i} attempts to make ${n.length} points`),n}(v,y*f));for(let e=t;e<b.length;e++)b[e].draw()}function k(){clear(0,0,width,height),S(),b.forEach((t=>{t.weight=g.thickness,t.setAlpha(g.alphaVal),t.draw()}))}function S(){clear(0,0,width,height);let t=[color(255,255,250,150),color(236,222,212,150),color(252,244,237,250)];background(t[0]),strokeWeight(width/3),stroke(t[2]),line(-.1*width,-.5*height,width,1.75*height),line(1.5*width,1*height,-.25*width,-.15*height),line(.75*width,-.25*height,-.1*width,1.1*height),line(.5*width,-.2*height,.35*width,1.2*height)}function C(){resizeCanvas(g.width,g.height),k()}function V(t=!0,e=!1){!function(t=!0,e=!1){console.log("setvars",t),b=[],m=shuffle(m),d=random([1,2,3,4,5,6,7]),t&&(p.vx1=random(.1,1.2),p.vx2=random(.01,.08),p.vy1=random(.01,.08),p.vy2=random(.5,1.5)),e&&(g.idealLength=floor(random(50,700)),g.minLength=floor(random(20,min(150,g.idealLength))),g.meetThreshold=floor(random(1,10)),g.thickness=floor(random(2,14)),g.alphaVal=floor(random(100,255)))}(t,e),u.show(),setTimeout((()=>{S(),x(),u.hide()}),50)}window.setup=function(){let t=c({params:w,doReset:V,redrawCurves:k,addCurves:()=>{u.show(),setTimeout((()=>{x(),u.hide()}),50)},initForceVals:{vx1:random(.1,1.2),vx2:random(.01,.08),vy1:random(.01,.08),vy2:random(.5,1.5)},resize:C,save:()=>saveCanvas(`x${p.vx1}-${p.vx2}-y${p.vy1}-${p.vy2}`,"png")});p=t.forces,g=t.curveVals,u=h(),createCanvas(g.width,g.height),V(),noLoop()}})();
//# sourceMappingURL=11-clean.js.map
